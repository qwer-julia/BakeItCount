@page "{swapId:int}"
@model BakeItCountWeb.Pages.Swap.RespondModel
@{
}

<div class="px-4 md:px-0">
    <h1 class="font-bungeeInline text-3xl md:text-6xl text-center text-cocoa mb-4">SOLICITAÇÃO DE TROCA</h1>

    <div class="flex justify-center mb-6 md:mb-8">
        <div class="inline-flex items-center gap-2 md:gap-3 hover:bg-cocoa-light border-3 border-cocoa rounded-full px-4 md:px-6 py-2 md:py-3 shadow-lg animate-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 md:size-8 text-cocoa">
                <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z" clip-rule="evenodd" />
            </svg>
            <span class="text-base md:text-xl font-bold text-cocoa uppercase">Aguardando Resposta</span>
        </div>
    </div>

    <div class="mx-auto my-6 md:my-10">
        <div class="flex flex-col md:flex-row my-4 gap-4 md:gap-6 justify-center max-w-4xl mx-auto items-center">
            <div class="border-3 border-cocoa rounded-xl w-full md:w-96 my-2 shadow-solid-cocoa p-4 text-xl md:text-2xl font-bold text-cocoa relative overflow-hidden bg-beige transition-all duration-300 hover:shadow-2xl hover:scale-105">
                <div class="absolute top-2 right-2 bg-peach text-beige text-xs font-bold px-3 py-1 rounded-full uppercase shadow-md animate-bounce">
                    Solicitante
                </div>

                <dl class="divide-y divide-peach-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6 text-xl md:text-2xl font-bungee">
                        <dt class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 md:size-6 text-peach flex-shrink-0">
                                <path d="M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" />
                                <path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z" clip-rule="evenodd" />
                            </svg>
                            @Model.SourceSchedule.WeekRef.ToString("dd/MM/yyyy")
                        </dt>
                    </div>
                </dl>
                <dl class="divide-y divide-peach-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6">
                        <dt class="text-peach text-base md:text-lg">Dupla:</dt>
                        <dd class="text-base md:text-lg">@Model.SourceSchedule.Pair.User1.Name e @Model.SourceSchedule.Pair.User2.Name</dd>
                    </div>
                </dl>
                <dl class="divide-y divide-peach-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6">
                        <dt class="text-peach text-base md:text-lg">Status:</dt>
                        <dd class="text-base md:text-lg flex items-center gap-2">
                            <span class="inline-block w-3 h-3 bg-peach rounded-full animate-pulse"></span>
                            Solicitando troca
                        </dd>
                    </div>
                </dl>
            </div>

            <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-10 md:size-12 text-cocoa animate-pulse rotate-90 md:rotate-0">
                    <path fill-rule="evenodd" d="M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
                </svg>
            </div>

            <div class="border-3 border-cocoa rounded-xl w-full md:w-96 my-2 p-4 shadow-solid-cocoa text-xl md:text-2xl font-bold text-cocoa relative overflow-hidden bg-beige transition-all duration-300 hover:shadow-2xl hover:scale-105">
                <div class="absolute top-2 right-2 bg-mint text-beige text-xs font-bold px-3 py-1 rounded-full uppercase hover-lift button-shine cursor-pointer animate-bounce">
                    Responder
                </div>

                <dl class="divide-y divide-mint-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6 text-xl md:text-2xl font-bungee">
                        <dt class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 md:size-6 text-mint flex-shrink-0">
                                <path d="M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" />
                                <path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z" clip-rule="evenodd" />
                            </svg>
                            @Model.TargetSchedule.WeekRef.ToString("dd/MM/yyyy")
                        </dt>
                    </div>
                </dl>
                <dl class="divide-y divide-mint-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6">
                        <dt class="text-mint text-base md:text-lg">Dupla:</dt>
                        <dd class="text-base md:text-lg">@Model.TargetSchedule.Pair.User1.Name e @Model.TargetSchedule.Pair.User2.Name</dd>
                    </div>
                </dl>
                <dl class="divide-y divide-mint-light my-2">
                    <div class="px-2 md:px-4 py-4 md:py-6">
                        <dt class="text-mint text-base md:text-lg">Status:</dt>
                        <dd class="text-base md:text-lg flex items-center gap-2">
                            <span class="inline-block w-3 h-3 bg-mint rounded-full animate-pulse"></span>
                            Respondendo troca
                        </dd>
                    </div>
                </dl>
            </div>
        </div>

        @if (Model.TargetSchedule.Pair.UserId1 == Model.CurrentUser.UserId || Model.TargetSchedule.Pair.UserId2 == Model.CurrentUser.UserId)
        {
            <div class="my-10 md:my-20 mx-auto text-center">
                <form method="post" class="flex flex-col md:flex-row gap-4 justify-center">
                    <input type="hidden" name="SwapId" value="@Model.SwapRequest.SwapId" />
                    <input type="hidden" name="RespondingUserId" value="@Model.CurrentUser.UserId" />

                    <button type="submit" name="Approve" value="false"
                            class="bg-peach text-beige rounded-2xl font-bungee px-6 md:px-8 py-3 md:py-4 text-2xl md:text-4xl
                       hover:bg-peach-light hover:text-beige cursor-pointer transition-all duration-300
                       hover:scale-105 md:hover:scale-110 hover:shadow-2xl active:scale-95 border-3 border-peach-light hover-lift button-shine">
                        REJEITAR
                    </button>

                    <button type="submit" name="Approve" value="true"
                            class="bg-mint text-beige rounded-2xl font-bungee px-6 md:px-8 py-3 md:py-4 text-2xl md:text-4xl
                       hover:bg-mint-light hover:text-beige cursor-pointer transition-all duration-300
                       hover:scale-105 md:hover:scale-110 hover:shadow-2xl active:scale-95 border-3 border-mint-light hover-lift button-shine">
                        ACEITAR
                    </button>
                </form>
            </div>
            <p class="flex text-base md:text-2xl font-semibold text-peach border-peach border-3 bg-beige p-4 rounded-2xl gap-2 mx-auto max-w-4xl shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-8 md:size-10 flex-shrink-0">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
                </svg>
                Atenção! Ao aceitar a troca, você e sua dupla serão responsáveis pelo sagrado bolo dessa semana.
            </p>
        }
        else if (Model.SourceSchedule.Pair.UserId1 == Model.CurrentUser.UserId || Model.SourceSchedule.Pair.UserId2 == Model.CurrentUser.UserId)
        {
            <div class="bg-cocoa-light border-3 border-cocoa rounded-2xl p-4 md:p-6 mx-auto max-w-4xl mb-6 md:mb-8 shadow-lg">
                <div class="flex items-start gap-3 md:gap-4">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-10 md:size-12 text-cocoa flex-shrink-0 animate-pulse">
                        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" />
                    </svg>
                    <div>
                        <h3 class="text-xl md:text-2xl font-bold text-cocoa mb-2">Sua solicitação está pendente</h3>
                        <p class="text-base md:text-lg text-cocoa">A outra dupla ainda não respondeu. Você pode cancelar a troca a qualquer momento enquanto ela não for aceita ou rejeitada.</p>
                    </div>
                </div>
            </div>

            <div class="my-10 md:my-20 mx-auto text-center">
                <form method="post">
                    <input type="hidden" name="SwapId" value="@Model.SwapRequest.SwapId" />
                    <input type="hidden" name="RespondingUserId" value="@Model.CurrentUser.UserId" />

                    <button type="submit" name="Approve" value="false"
                            class="w-full md:w-auto bg-peach text-beige rounded-2xl font-bungee px-6 md:px-8 py-3 md:py-4 text-2xl md:text-4xl
                       hover:bg-peach-light hover:text-beige cursor-pointer transition-all duration-300
                       hover:scale-105 md:hover:scale-110 hover:shadow-2xl active:scale-95 hover-lift button-shine">
                        CANCELAR TROCA
                    </button>
                </form>
            </div>
            <p class="flex text-base md:text-2xl font-semibold text-peach border-peach border-3 bg-beige p-4 rounded-2xl gap-2 mx-auto max-w-4xl shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-8 md:size-10 flex-shrink-0">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
                </svg>
                Atenção! Ao cancelar a troca, você e sua dupla continuarão responsáveis pelo sagrado bolo dessa semana.
            </p>
        }
    </div>
</div>

<style>
    .animation-delay-150 {
        animation-delay: 150ms;
    }

    .animation-delay-300 {
        animation-delay: 300ms;
    }
</style>